2009-04-04  Michel Hoche-Mong <hoche@grok.com>

    * aclocal.m4: add AH_TEMPLATE macros where necessary.
                  strip out test for HAVE_LOCAL_READLINE.
    * acconfig.h: removed
    * configure: regenerated
    * misc files in icb/ : remove HAVE_LOCAL_READLINE test.
 
2009-04-03  Michel Hoche-Mong <hoche@grok.com>

	* aclocal.m4: add /sw to the test for readline libs/includes
	* configure: regenerated

	* icb/server.c: change u_short to in_port_t
	* icb/s_chpw.c: fix printf formatting error

2009-03-23  Michel Hoche-Mong <hoche@grok.com>

	* Makefile: remove. Generated by configure.
	* configure.in: remove special Solaris test. Not needed with the
	new POSIX-compliant signal handling.
	* configure: regenerated.

	* system.icbrc: Added oset keepalive stub for Mark Atkinson's
	keepalive patch. Added a default environment setup in case it can't
	find the user's .icb/icbrc.

	* icb/Makefile.in: Added DATAROOTDIR = @datarootdir@ mostly to keep
	configure happy.
	* icb/c_replay.c: Made char nick[] not static.
	* icb/c_shell.c: Changed the last value to execlp to NULL. Was 0.
	* icb/parse.c: Cast various return values from the TCL interpreter
	properly.
	* icb/signals.c: Convert old sigsetmask/sigblock to modern POSIX
	sigprocmask version.
	* icb/tcl.c: Cast tc->tc_func to (Tcl_CmdProc*) when calling
	Tcl_CreateCommand().

	* icb/version.h: Set the version to 5.1.1b2.

2009-03-23  Michel Hoche-Mong <hoche@grok.com>
	Various modifications to implement Mark Atkinson's keepalive patch:

	* icb/getline.c: Reset the call to alarm().
	* icb/globals.c: Added "keepalive" to the global settings array.
	* icb/globals.c: Added "keepalive" to the global settings array.
	* icb/oset.c: Added "keepalive" to the oset array.
	* icb/signals.c: Added handle_keepalive() signal handler.

2003-08-07  Felix Lee  <felix.log1@canids.net>

	* icb/parse.c: include <stdarg.h>

2003-07-06  Felix Lee  <felix.log1@canids.net>

	* configure.in (AC_GCC_TRADITIONAL): Remove.
	* configure: Regenerated.

	* configure.in: Add -Wall for gcc.
	* configure: Regenerated.

2003-07-06  Felix Lee  <felix.log1@canids.net>

	* configure.in, icb/*: Assume everyone has C89 and POSIX.  Get rid
	of useless HAVE_xxx tests (no point having them if icb won't
	compile when they're false).  Clean up #includes.
	* config.h.in, configure: Regenerated.

2003-06-24  Felix Lee  <felix.log1@canids.net>

	* icb/server.c (server_connect): Turn on socket keepalive.

	* icb/server.c (server_connect): Mostly style cleanups.

2003-06-18  Felix Lee  <felix.log1@canids.net>

	* icb/strccmp.c (strcasestr): Kill gcc warning about deprecated
	label usage.

	* icb/tcl2string: Used to be mktclinit.
	* icb/tcl_init.tcl: Used to be tclinit.tcl.
	* icb/tcl_connect.tcl: New file.
	* icb/Makefile.in: New rule for *.tcl -> *.string, and related changes.

	* icb/tcl.c (tcl_connected): New function.
	* icb/tcl.c (tclreadicbrc): Delete.
	* icb/msgs.c (protomsg): Move after-login code to loginokmsg().
	* icb/msgs.c (loginokmsg): Use tcl_connected().

	* icb/tcl.c (tcl_restrict): Used to be tclrestrict().
	* icb/oset.c (restrict): Use tcl_restrict().

	* icb/tcl.c (tcl_init): Used to be tclinit().
	* icb/main.c (main): Use tcl_init().
	* icb/main.c (main): Move Tcl_Linkvar calls to tcl_init().

	* icb/main.c (main): Remove some dead code.

	* icb/tcl.c: General cleanups.
	* icb/protos.h: Update for tcl.c.

	* system.icbrc: Remove some junk and redundant stuff.

	* system.icbrc: Remove call to ~/.icb/icbrc (now done in
	tcl_connect.tcl)

	* icb/c_log.c (startsessionlog): Get rid of sys_nerr (squelches a
	gcc warning).

2003-06-16  Felix Lee  <felix.log1@canids.net>

	* icb/strings.c (msplit): Rewritten to do hard/soft split limits.
	Now takes 3 args.
	* icb/protos.h (msplit): Ditto.
	* icb/strings.c (mbreakprint): Use new msplit, try not to break
	long words (eg, URLs), and don't print hyphens when splitting.
	* icb/send.c: Use new msplit.

	* icb/helpdata.c: Delete reference to $ICBRC (not used any more).

	* icb/funcs.h: Remove obsolete pre-ansi-c file.
	* icb/Makefile.in: Delete references to funcs.h.
	* icb/icb.h: Ditto.

	* Makefile.in: Add VPATH and other stuff needed for srcdir!=objdir
	builds to work.
	* icb/Makefile.in: Ditto.

	* ChangeLog: New file.
